/* =========================================================
   NutMe UI - Full Stylesheet (Updated)
   Implements hierarchical spacing, improved chips, logo,
   file meta, scroll mask, skeleton fade, ARIA-friendly focus.
   ========================================================= */

/* ---------- Root & Variables ---------- */
:root {
  --bg-body: #0d0d0e;
  --bg-panel: #161617;
  --bg-panel-alt: #1d1f20;
  --panel-sub: #191a1b;

  --layer-1: #18191a;
  --layer-2: #1e1f21;
  --layer-3: #202122;

  --border: #262626;
  --border-soft: #202021;
  --border-strong: #3a3a3c;
  --border-faint: #303133;

  --accent: #ffb321;
  --accent-grad-end: #ffb947;
  --accent-fade: rgba(255,179,33,0.14);

  --text-hi: #e6e7e9;
  --text-med: #c4c6cb;
  --text-soft: #b9bbbf;
  --text-dim: #8a8d91;
  --text-faint: #707274;

  --danger: #ff3d3d;

  --focus-ring: 0 0 0 2px var(--bg-body), 0 0 0 4px var(--accent);

  --radius-xs: 3px;
  --radius-sm: 6px;
  --radius: 10px;
  --radius-lg: 18px;

  --transition: 150ms cubic-bezier(.4,.0,.2,1);
  --space-1: .25rem;
  --space-2: .5rem;
  --space-3: .75rem;
  --space-4: 1rem;
  --space-5: 1.25rem;
  --space-6: 1.5rem;
  --space-8: 2rem;

  --shadow-panel: 0 4px 24px -6px rgba(0,0,0,.55);
  --gradient-accent: linear-gradient(90deg,var(--accent) 0%, var(--accent-grad-end) 100%);

  --shadow-chip-selected: 0 0 0 1px #3a2b08, 0 0 0 2px rgba(255,179,33,0.14), 0 6px 14px -6px rgba(255,179,33,0.4);
  --shadow-chip-selected-light: 0 0 0 1px #f6d697, 0 0 0 2px rgba(255,179,33,0.35), 0 6px 14px -6px rgba(255,179,33,0.4);

  --compact-factor: 1;
  color-scheme: dark;
}

body.compact { --compact-factor: .78; }

body {
  background: radial-gradient(circle at 22% 18%, #1e222b, #0d0d0e 60%);
  -webkit-font-smoothing: antialiased;
  font-family: 'Inter', system-ui, sans-serif;
}

.container-global {
  width: 100%;
  max-width: 1080px;
  margin-inline: auto;
  padding-inline: clamp(var(--space-4), 5vw, var(--space-5));
}

.p-block {
  padding: calc(var(--space-5)*var(--compact-factor)) clamp(var(--space-4), 4vw, var(--space-6));
}

.space-y-var > * + * {
  margin-top: calc(var(--space-5)*var(--compact-factor));
}

/* ---------- Panels ---------- */
.panel {
  position: relative;
  background: linear-gradient(180deg,var(--bg-panel) 0%, var(--bg-panel-alt) 100%);
  border: 1px solid var(--border);
  border-radius: var(--radius-lg);
  box-shadow: var(--shadow-panel);
  overflow: clip;
  isolation: isolate;
}
.panel:before {
  content:"";
  position:absolute;
  inset:0;
  backdrop-filter: saturate(1.05);
  pointer-events:none;
  background:
    radial-gradient(circle at 15% 12%, rgba(255,255,255,0.045), transparent 62%),
    radial-gradient(circle at 82% 85%, rgba(255,179,33,0.06), transparent 68%);
  mix-blend-mode: overlay;
}

.panel-main { animation: fadeSlide .5s ease; }
@keyframes fadeSlide {
  0% { opacity:0; transform:translateY(10px); }
  100% { opacity:1; transform:translateY(0); }
}

.panel-head { display:grid; gap: .75rem; margin-bottom: 1rem; }
.panel-title {
  font-size: clamp(1.25rem, 1.1rem + .8vw, 1.9rem);
  font-weight: 700;
  display:flex;
  align-items:center;
  gap:.6rem;
  letter-spacing:-0.5px;
  color: var(--text-hi);
  position:relative;
}
.panel-subtext {
  font-size: .87rem;
  line-height:1.4;
  color: var(--text-dim);
  max-width: 56ch;
}
.panel-title-sm {
  font-weight:600;
  display:flex;
  align-items:center;
  gap:.55rem;
  font-size:1.1rem;
  letter-spacing:-0.25px;
  color: var(--text-hi);
}

/* Accent Bars */
.accent-bar,
.accent-bar-small {
  display:inline-block;
  background: var(--gradient-accent);
  border-radius: 3px;
  box-shadow:
    0 0 0 1px rgba(255,255,255,0.05),
    0 0 0 3px rgba(255,179,33,0.23),
    0 0 12px -2px rgba(255,179,33,0.55);
}
.accent-bar { width:8px; height:1.65rem; }
.accent-bar-small { width:5px; height:1.2rem; }

/* ---------- Logo ---------- */
.brand-logo {
  font-size:0;
  display:inline-flex;
  align-items:center;
  text-decoration:none;
  gap:2px;
}
.brand-part {
  display:inline-flex;
  align-items:center;
  justify-content:center;
  font-weight:800;
  font-size:1.15rem;
  line-height:1;
  padding:6px 10px 7px;
  border-radius:5px;
  letter-spacing:-0.5px;
  box-shadow:0 0 0 1px rgba(255,255,255,0.04), 0 2px 4px -2px rgba(0,0,0,.6);
  transition:var(--transition);
}
.brand-part.nut { background:#000; color:#fff; }
.brand-part.me  { background:var(--accent); color:#181818; }
.brand-logo:hover .brand-part.nut { background:#111; }
.brand-logo:hover .brand-part.me  { filter:brightness(1.05); }
.brand-logo:focus-visible .brand-part {
  outline:2px solid var(--accent);
  outline-offset:3px;
}

/* ---------- Header & Footer ---------- */
.site-header {
  position: sticky;
  top: 0;
  z-index: 50;
  background: rgba(15,15,16,.84);
  backdrop-filter: blur(12px);
  border-bottom: 1px solid var(--border);
}
.site-footer {
  border-top: 1px solid var(--border);
  background: rgba(15,15,16,.75);
  backdrop-filter: blur(10px);
  padding: var(--space-6) 0;
  margin-top: auto;
}

/* Skip link */
.skip-link {
  position:absolute;
  left:0; top:-40px;
  background:#000;
  color:#fff;
  padding:8px 14px;
  z-index:999;
  border-radius:0 0 6px 0;
  text-decoration:none;
  font-size:14px;
  transition:var(--transition);
}
.skip-link:focus { top:0; }

/* Divider */
.divider-vert::after {
  content:"";
  display:inline-block;
  width:1px; height:14px;
  background: var(--border-strong);
  margin-inline:2px;
}

/* Toggle theme */
.toggle-theme-btn {
  display:flex;
  align-items:center;
  justify-content:center;
  width:40px; height:40px;
  border-radius:10px;
  background:#1b1b1c;
  border:1px solid var(--border);
  color:#c8c8cb;
  transition:var(--transition);
}
.toggle-theme-btn:hover { background:#202021; color:#fff; }
.toggle-theme-btn:active { transform:scale(.92); }

/* Compact toggle pill */
.pill-btn-pill {
  font-size:11px;
  letter-spacing:.8px;
  padding:6px 14px;
  background:#1c1c1d;
  border:1px solid #2d2d2e;
  border-radius:999px;
  font-weight:600;
  color:#ccc;
  transition:var(--transition);
}
.pill-btn-pill:hover { background:#222223; color:#fff; }

/* ---------- Form Layout ---------- */
.form-grid {
  display:grid;
  gap: calc(1.25rem * var(--compact-factor));
}
.field-group {
  display:flex;
  flex-direction:column;
  gap:.55rem;
  position:relative;
}
.field-group + .field-group {
  margin-top:1.25rem;
}
.field-group + .field-group::before {
  content:"";
  position:absolute;
  top:-0.7rem;
  left:0;
  right:0;
  height:1px;
  background: linear-gradient(90deg, rgba(255,255,255,0.05), rgba(255,255,255,0));
}

.field-label {
  font-size:.62rem;
  letter-spacing:.12em;
  text-transform:uppercase;
  font-weight:600;
  color:var(--text-soft);
  display:flex;
  align-items:center;
  gap:.5rem;
}

.hint {
  font-weight:400;
  font-size:.6rem;
  letter-spacing:.05em;
  padding:.2em .45em;
  background:#212224;
  border:1px solid #2f3032;
  border-radius:1rem;
  color:#8b8d92;
}

.assist-text {
  font-size:.65rem;
  color:var(--text-dim);
  line-height:1.3;
  max-width:55ch;
}

/* ---------- Upload ---------- */
.upload-box {
  position:relative;
  border:1px dashed #2b2c2d;
  background:var(--layer-1);
  border-radius: var(--radius);
  padding:.9rem;
  cursor:pointer;
  transition:var(--transition);
  outline:none;
}
.upload-box:hover,
.upload-box:focus-visible {
  border-color: var(--accent);
  background:#1b1c1d;
}
.upload-box.dragging {
  background:var(--layer-2);
  background-image:
    repeating-linear-gradient(135deg, rgba(255,179,33,0.12) 0 6px, transparent 6px 12px);
  animation: dashShift 1s linear infinite;
  border-color:var(--accent);
  box-shadow:0 0 0 2px var(--accent), 0 0 0 6px rgba(255,179,33,0.18);
}
@keyframes dashShift {
  to { background-position:100px 0; }
}

.preview-wrapper {
  position:relative;
  width:100%;
  aspect-ratio:1/1;
  background:#0f0f10;
  border:1px solid #232324;
  border-radius: var(--radius-sm);
  overflow:hidden;
  display:flex;
  align-items:center;
  justify-content:center;
  transition:var(--transition);
}
.preview-wrapper:after {
  content:"";
  position:absolute;
  inset:0;
  background:
    linear-gradient(120deg, rgba(255,179,33,0.08), transparent 65%),
    radial-gradient(circle at 80% 90%, rgba(255,179,33,0.08), transparent 55%);
  pointer-events:none;
  mix-blend-mode:overlay;
}
.preview-placeholder {
  text-align:center;
  font-size:12px;
  line-height:1.25;
  color:#9a9a9d;
  font-weight:500;
  letter-spacing:.3px;
  padding:8px 4px;
  max-width:90%;
}
.preview-wrapper img {
  width:100%; height:100%; object-fit:cover;
  animation: fadeIn .4s ease;
}
@keyframes fadeIn {
  from { opacity:0; transform:scale(1.02); }
  to { opacity:1; transform:scale(1); }
}

.file-meta {
  font-size:.6rem;
  letter-spacing:.05em;
  text-transform:uppercase;
  color:#888c91;
  display:flex;
  gap:.6rem;
  align-items:center;
  margin-top:.35rem;
}

/* ---------- Text Inputs ---------- */
.input-field {
  width:100%;
  background:#181819;
  border:1px solid #29292b;
  color:#e7e7e9;
  font-size:14px;
  padding:.85rem .95rem;
  border-radius: var(--radius-sm);
  outline:none;
  transition:var(--transition);
  line-height:1.3;
}
.input-field:focus {
  border-color: var(--accent);
  box-shadow:0 0 0 1px var(--accent), 0 0 0 4px rgba(255,179,33,0.28);
}
.input-field::placeholder { color: var(--text-faint); }

/* ---------- Intensity (Chips) ---------- */
.chip-field {
  position:relative;
  padding:1rem .95rem 1.15rem;
  border:1px solid #333436;
  border-radius:var(--radius-sm);
  background:#18191a;
}
.with-frame-title {
  position:absolute;
  top:-0.55rem;
  left:0.8rem;
  padding:0 .45rem;
  background:linear-gradient(90deg,#18191a,#18191a);
  font-size:.58rem;
  line-height:1.1;
  letter-spacing:.14em;
  color:#d1d2d4;
}
.intensity-scroller {
  display:flex;
  gap:.6rem;
  overflow-x:auto;
  scrollbar-width:none;
  -ms-overflow-style:none;
  padding-bottom:2px;
}
.intensity-scroller::-webkit-scrollbar { display:none; }

.intensity-pill {
  position:relative;
  display:inline-flex;
  align-items:center;
  justify-content:center;
  cursor:pointer;
  background:var(--layer-2);
  border:1px solid #3a3b3d;
  color:#d5d6d9;
  font-size:12.5px;
  padding:.55rem 1rem;
  border-radius:999px;
  font-weight:500;
  transition: background .25s var(--transition), transform .25s;
  line-height:1;
  flex:0 0 auto;
  box-shadow:inset 0 0 0 1px rgba(255,255,255,0.02);
}
.intensity-pill input {
  position:absolute; inset:0; opacity:0; cursor:pointer;
}
.intensity-pill:hover {
  background:#252628;
  border-color:#454648;
  color:#fff;
  transform:translateY(-1px) scale(1.03);
}
.intensity-pill input:checked + span {
  color:#ffd58a;
  font-weight:600;
}
.intensity-pill input:checked + span:before {
  content:"";
  position:absolute;
  inset:-6px -10px;
  background:
    radial-gradient(circle at 50% 55%, rgba(255,179,33,0.22), transparent 70%),
    #1a1b1c;
  border-radius:999px;
  z-index:-1;
  box-shadow: var(--shadow-chip-selected);
}
.intensity-pill:has(input:checked) {
  background:#1a1b1c;
  border-color:#4a3a16;
}
.intensity-pill input:focus-visible + span,
.intensity-pill:has(input:focus-visible) {
  outline:2px solid var(--accent);
  outline-offset:3px;
}

/* ---------- Consent ---------- */
.consent-box {
  padding:.9rem 1rem;
  background:#18191a;
  border:1px solid #26282a;
  border-radius: var(--radius-sm);
  display:flex;
}
.consent-label {
  display:grid;
  grid-template-columns:auto 1fr;
  align-items:center;
  gap:.7rem;
  font-size:.72rem;
  line-height:1.25;
  color:#c8c9cb;
  cursor:pointer;
}
.consent-input {
  position:absolute;
  opacity:0; width:0; height:0;
}
.check-ui {
  width:18px; height:18px;
  border-radius:5px;
  background:#131314;
  border:1px solid #313234;
  display:inline-flex;
  align-items:center;
  justify-content:center;
  font-size:.7rem;
  color:transparent;
  transition:var(--transition);
}
.consent-input:focus-visible + .check-ui {
  box-shadow:0 0 0 1px var(--accent),0 0 0 4px rgba(255,179,33,.32);
}
.consent-input:checked + .check-ui {
  background:var(--gradient-accent);
  color:#161616;
  border-color:var(--accent);
}
.consent-input:checked + .check-ui:before {
  content:"✓";
  font-weight:700;
  transform:translateY(-1px);
}

/* ---------- Buttons ---------- */
.btn-accent, .btn-neutral, .btn-outline, .btn-tertiary {
  position:relative;
  font-size:14px;
  font-weight:600;
  padding:.9rem 1.3rem;
  border-radius: var(--radius-sm);
  transition:var(--transition);
  display:inline-flex;
  align-items:center;
  gap:.55rem;
  border:1px solid transparent;
  line-height:1.1;
  min-height:44px;
  text-decoration:none;
  user-select:none;
}
.btn-accent {
  background: var(--gradient-accent);
  color:#181818;
  box-shadow:0 2px 4px -1px rgba(0,0,0,.55),0 4px 22px -6px rgba(255,179,33,0.55);
}
.btn-accent:hover { filter:brightness(1.07); }
.btn-accent:active { transform:translateY(1px); }
.btn-accent:disabled { opacity:.5; cursor:not-allowed; box-shadow:none; }
.btn-neutral {
  background:#1d1e1f;
  color:#d4d4d7;
  border-color:#2a2b2d;
}
.btn-neutral:hover { background:#232425; }
.btn-neutral:disabled { opacity:.4; cursor:not-allowed; }
.btn-outline {
  background:transparent;
  color:#c9c9cc;
  border-color:#36383a;
}
.btn-outline:hover { background:#202122; color:#fff; }
.btn-tertiary {
  background:transparent;
  border-color:transparent;
  color:#888;
  padding:.55rem .9rem;
  min-height:auto;
  font-size:.85rem;
  text-decoration:underline;
}
.btn-tertiary:hover {
  color:#ccc;
  background:rgba(255,255,255,0.04);
  text-decoration:none;
}
.btn-slim {
  padding:.55rem 1rem;
  font-size:.78rem;
  min-height:auto;
}

.pill-btn {
  font-size:11px;
  letter-spacing:.8px;
  padding:7px 15px 6px;
  background:#1c1c1d;
  border:1px solid #303032;
  border-radius:999px;
  font-weight:600;
  color:#d0d0d3;
  transition:var(--transition);
  display:inline-flex;
  align-items:center;
  min-height:34px;
}
.pill-btn:hover { background:#232324; color:#fff; border-color:#3a3b3d; }

.action-row { display:flex; flex-wrap:wrap; gap:.75rem; align-items:center; }

/* ---------- Roast Output ---------- */
.roast-box {
  min-height:170px;
  background:#121213;
  border:1px solid #222325;
  border-radius: var(--radius-sm);
  padding:1rem 1.1rem;
  position:relative;
  box-shadow:inset 0 0 0 1px #191a1b;
  overflow-y:auto;
  max-height:460px;
  scrollbar-gutter:stable both-edges;
  scroll-behavior:smooth;
  white-space:pre-wrap;
  word-break:break-word;
  mask-image: linear-gradient(to bottom, rgba(0,0,0,1) 85%, rgba(0,0,0,0.85));
}
.roast-box p + p { margin-top:.55rem; }

.spinner { animation: spin .85s linear infinite; }
@keyframes spin { to { transform: rotate(360deg); } }

/* Skeleton loader */
.skeleton-lines {
  display:grid;
  gap:.6rem;
  transition:opacity .35s ease;
}
.skeleton-lines span {
  display:block;
  height:12px;
  background: linear-gradient(90deg,#2a2b2d 0%, #343537 50%, #2a2b2d 100%);
  background-size:200% 100%;
  border-radius:6px;
  animation: shimmer 1.25s linear infinite;
  width:var(--w,70%);
}
.skeleton-lines.fade-out { opacity:0; }
@keyframes shimmer {
  0% { background-position:0% 50%; }
  100% { background-position:-200% 50%; }
}

/* ---------- Tips Block ---------- */
.tips-block {
  margin-top: calc(var(--space-6)*var(--compact-factor));
  border:1px solid #232426;
  border-radius: var(--radius);
  background:#18191a;
  padding:.7rem 1rem .9rem;
}
.tips-block[open] { animation: dropOpen .35s ease; }
@keyframes dropOpen {
  0% { opacity:0; transform:translateY(-4px); }
  100% { opacity:1; transform:translateY(0); }
}
.tips-summary {
  cursor:pointer;
  list-style:none;
  font-size:.7rem;
  font-weight:600;
  text-transform:uppercase;
  letter-spacing:.1em;
  display:flex;
  align-items:center;
  gap:.5rem;
  color:#d0d0d4;
  position:relative;
  padding:.4rem 0;
}
.tips-summary::-webkit-details-marker { display:none; }
.tips-summary:after {
  content:"›";
  display:inline-block;
  transform:rotate(90deg);
  transition:var(--transition);
  font-size:.75rem;
  color:#888;
}
.tips-block:not([open]) .tips-summary:after { transform:rotate(0deg); }
.tips-content {
  margin-top:.55rem;
  font-size:.66rem;
  color:#b8b9be;
  line-height:1.4;
}
.tips-list { display:grid; gap:.45rem; }
.tips-list li {
  position:relative;
  padding-left:.9rem;
}
.tips-list li:before {
  content:"•";
  position:absolute;
  left:0; top:0;
  color:var(--accent);
}

/* ---------- Model Tag ---------- */
/* .model-tag {
  font-size:.62rem;
  letter-spacing:.08em;
  text-transform:uppercase;
  margin-top:.3rem;
  color:#808185;
  background:#191a1b;
  border:1px solid #242526;
  display:inline-flex;
  padding:.35rem .6rem;
  border-radius:999px;
  gap:.4rem;
  align-items:center;
} */

/* ---------- Sticky Bar ---------- */
.sticky-bar {
  position:fixed;
  left:0;
  right:0;
  bottom:0;
  z-index:60;
  background: linear-gradient(180deg, rgba(20,20,21,.15) 0%, rgba(20,20,21,.85) 55%);
  backdrop-filter: blur(16px);
  padding:.75rem .85rem;
  border-top:1px solid #252627;
  display:flex;
  justify-content:center;
  transform:translateY(14px);
  opacity:0;
  transition: all .45s cubic-bezier(.4,0,.2,1);
}
.sticky-bar.active {
  transform:translateY(0);
  opacity:1;
}
.sticky-inner {
  width:100%;
  max-width:680px;
  display:flex;
  gap:.6rem;
  justify-content:space-between;
}

/* ---------- Toasts ---------- */
.toast-container {
  position:fixed;
  top:.75rem; right:.75rem;
  display:grid;
  gap:.6rem;
  z-index:100;
  max-width:280px;
}
.toast {
  background:#1b1c1d;
  border:1px solid #2d2e30;
  padding:.75rem .85rem;
  border-radius: var(--radius-sm);
  font-size:.72rem;
  line-height:1.25;
  display:grid;
  gap:.3rem;
  animation: toastIn .4s cubic-bezier(.4,0,.2,1);
  position:relative;
}
.toast.accent {
  border-color: var(--accent);
  box-shadow: 0 0 0 1px var(--accent-fade);
}
.toast.error {
  border-color:#ff5555;
  background:#271616;
  color:#ffbbbb;
}
.toast button {
  position:absolute;
  top:4px; right:4px;
  background:transparent;
  border:none;
  color:#777;
  cursor:pointer;
  font-size:.8rem;
  line-height:1;
}
.toast button:hover { color:#fff; }
@keyframes toastIn {
  0% { opacity:0; transform:translateY(-6px) scale(.96); }
  100% { opacity:1; transform:translateY(0) scale(1); }
}

/* ---------- Utilities ---------- */
.hidden { display:none !important; }
.animate-pulse-glow { animation: pulseGlow 1.4s ease-in-out infinite; }
@keyframes pulseGlow {
  0%,100% { opacity:.35; }
  50% { opacity:1; }
}

/* ---------- Responsive Layout ---------- */
@media (min-width: 760px) {
  .form-grid {
    grid-template-columns: repeat(auto-fit, minmax(270px, 1fr));
  }
  .field-group:nth-child(1),
  .consent-box,
  .action-row,
  #progressBarContainer {
    grid-column:1 / -1;
  }
}

/* ---------- Light Theme Overrides ---------- */
body.light {
  --bg-body:#f5f6f8;
  --bg-panel:#ffffff;
  --bg-panel-alt:#f4f5f7;
  --panel-sub:#eef0f3;

  --layer-1:#fafbfc;
  --layer-2:#eceff2;
  --layer-3:#e3e6ea;

  --border:#dadce1;
  --border-soft:#e2e4e8;
  --border-strong:#c3c7ce;

  --text-hi:#1d1f22;
  --text-med:#2e3034;
  --text-soft:#55565b;
  --text-dim:#63656a;
  --text-faint:#7d8287;

  color-scheme: light;
  background: radial-gradient(circle at 30% 20%, #ffffff, #e6e9ef 70%);
}
body.light .panel { border-color: var(--border); }
body.light .panel:before {
  background: radial-gradient(circle at 15% 15%, rgba(0,0,0,0.045),transparent 60%);
  mix-blend-mode:normal;
}
body.light .brand-part.nut { background:#111; color:#fff; }
body.light .brand-part.me { background:var(--accent); color:#181818; }
body.light .upload-box { background:var(--layer-1); border-color:#d2d5da; }
body.light .upload-box:hover { background:#f1f3f5; }
body.light .preview-wrapper { background:#f4f6f8; border-color:#d7dbe0; }
body.light .input-field { background:#fff; border-color:#d6d9de; color:#1c1f22;}
body.light .input-field::placeholder { color:#9ba0a8; }
body.light .chip-field { background:#f6f7f9; border-color:#d0d4da; }
body.light .with-frame-title { background:linear-gradient(90deg,#f6f7f9,#f6f7f9); color:#55585d; }
body.light .intensity-pill {
  background:#eceff2;
  border-color:#d2d6dc;
  color:#4d4f53;
  box-shadow:inset 0 0 0 1px rgba(255,255,255,0.3);
}
body.light .intensity-pill:hover {
  background:#e3e6e9;
  border-color:#c6cbd2;
  color:#222;
}
body.light .intensity-pill:has(input:checked) {
  background:#fefaf3;
  border-color:#e7c279;
}
body.light .intensity-pill input:checked + span { color:#c57c00; }
body.light .intensity-pill input:checked + span:before {
  background:
    radial-gradient(circle at 50% 55%, rgba(255,179,33,0.35), transparent 70%),
    #fff4e1;
  box-shadow:var(--shadow-chip-selected-light);
}
body.light .consent-box { background:#f3f5f7; border-color:#dce0e5; }
body.light .pill-btn { background:#eef0f3; border-color:#d6d9de; color:#444; }
body.light .pill-btn:hover { background:#e3e6ea; }
body.light .site-header { background:rgba(255,255,255,.85); }
body.light .site-footer { background:rgba(250,250,252,.85); }
body.light .toggle-theme-btn { background:#f4f5f7; border-color:#d6d9de; color:#555; }
body.light .toggle-theme-btn:hover { background:#ebeef2; color:#111; }
body.light .roast-box { background:#ffffff; border-color:#dadde2; box-shadow:inset 0 0 0 1px #eceff3; }
body.light .tips-block { background:#f6f8fa; border-color:#dfe3e7; }
body.light .model-tag { background:#f0f3f6; border-color:#d6d9de; color:#555; }
body.light .toast { background:#f6f7f9; border-color:#d2d6da; }
body.light .toast.error { background:#ffecec; border-color:#ffb7b7; color:#8b1a1a; }

/* ---------- Progress Bar ---------- */
.progress-track {
  width:100%; height:6px;
  background:#232426;
  border-radius:4px;
  overflow:hidden;
}
.progress-bar {
  height:100%; width:0%;
  background:var(--gradient-accent);
  transition: width .35s ease;
}
body.light .progress-track { background:#d9dce0; }

/* ---------- Focus & Accessibility ---------- */
:focus-visible {
  outline:2px solid var(--accent);
  outline-offset:3px;
}

/* ---------- Reduced Motion ---------- */
@media (prefers-reduced-motion: reduce) {
  * { animation:none !important; transition:none !important; }
  .sticky-bar { transform:none !important; opacity:1 !important; }
}
.sr-only {
  position:absolute;
  width:1px;
  height:1px;
  padding:0;
  margin:-1px;
  overflow:hidden;
  clip:rect(0 0 0 0);
  white-space:nowrap;
  border:0;
}